<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="720" viewBox="0 0 1200 720">
  <defs>
    <style><![CDATA[
      .box { fill:#ffffff; stroke:#2d3e50; stroke-width:2; rx:8; ry:8; }
      .title { font: 700 16px Roboto, Arial, sans-serif; fill:#2d3e50; }
      .text { font: 400 14px Roboto, Arial, sans-serif; fill:#2d3e50; }
      .sub { font: 400 13px Roboto, Arial, sans-serif; fill:#2d3e50; }
      .note { font: 400 12px Roboto, Arial, sans-serif; fill:#566; }
      .diamond { fill:#ffffff; stroke:#2d3e50; stroke-width:2; }
      .ellipse { fill:#ffffff; stroke:#2d3e50; stroke-width:2; }
      .arrow { stroke:#2d3e50; stroke-width:2; fill:none; marker-end:url(#arrowHead); }
      .group { fill:#f8fafc; stroke:#cbd5e1; stroke-width:1; rx:10; ry:10; }
    ]]></style>
    <marker id="arrowHead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#2d3e50"/>
    </marker>
  </defs>

  <!-- Top pipeline -->
  <rect x="30" y="60" width="180" height="60" class="box"/>
  <text x="40" y="95" class="title">Application Code</text>

  <rect x="260" y="60" width="180" height="60" class="box"/>
  <text x="270" y="95" class="title">Cache&lt;K,V&gt;</text>

  <rect x="490" y="60" width="220" height="60" class="box"/>
  <text x="500" y="95" class="title">KeyValueStore&lt;K,V&gt;</text>

  <!-- Strategy diamond -->
  <polygon points="780,90 840,60 900,90 840,120" class="diamond"/>
  <text x="785" y="88" class="sub">select via</text>
  <text x="788" y="106" class="title">CacheType</text>

  <!-- Arrows top path -->
  <line x1="210" y1="90" x2="260" y2="90" class="arrow"/>
  <line x1="440" y1="90" x2="490" y2="90" class="arrow"/>
  <line x1="710" y1="90" x2="780" y2="90" class="arrow"/>

  <!-- IEvictStrategy label -->
  <text x="770" y="40" class="text">IEvictStrategy&lt;K,V&gt;</text>

  <!-- LRU group -->
  <rect x="980" y="20" width="190" height="220" class="group"/>
  <text x="990" y="45" class="title">LRUStrategy</text>
  <rect x="995" y="60" width="170" height="60" class="box"/>
  <text x="1005" y="90" class="sub">ConcurrentHashMap</text>
  <text x="1005" y="109" class="note">&lt;K, CacheNode&lt;K,V&gt;&gt;</text>
  <rect x="995" y="130" width="170" height="80" class="box"/>
  <text x="1005" y="160" class="sub">Doubly Linked List</text>
  <text x="1005" y="179" class="note">of CacheNode&lt;K,V&gt;</text>

  <!-- LFU group -->
  <rect x="980" y="280" width="190" height="220" class="group"/>
  <text x="990" y="305" class="title">LFUStrategy</text>
  <rect x="995" y="320" width="170" height="60" class="box"/>
  <text x="1005" y="350" class="sub">ConcurrentHashMap</text>
  <text x="1005" y="369" class="note">&lt;K, CacheNode&lt;K,V&gt;&gt;</text>
  <rect x="995" y="390" width="170" height="90" class="box"/>
  <text x="1005" y="420" class="sub">Frequency Buckets</text>
  <text x="1005" y="439" class="note">freq â†’ LinkedHashSet&lt;K&gt;</text>

  <!-- Arrows from strategy to implementations -->
  <line x1="900" y1="90" x2="980" y2="90" class="arrow"/>
  <line x1="840" y1="120" x2="840" y2="320" class="arrow"/>
  <line x1="840" y1="320" x2="980" y2="320" class="arrow"/>

  <!-- Background cleanup -->
  <ellipse cx="700" cy="280" rx="110" ry="28" class="ellipse"/>
  <text x="625" y="285" class="text">Scheduled cleanUp()</text>
  <line x1="700" y1="252" x2="780" y2="120" class="arrow"/>

  <!-- Notes at bottom -->
  <text x="30" y="650" class="note">Reads move nodes to head in LRU; TTL enforced on read and via cleanup.</text>
  <text x="30" y="670" class="note">Mutations are sequenced; map is concurrent; list protected by a lock.</text>

  <!-- Connect Application Code to Cache -->
  <line x1="30" y1="90" x2="30" y2="90" class="arrow"/>
</svg>


